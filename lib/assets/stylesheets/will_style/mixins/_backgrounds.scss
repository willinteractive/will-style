@mixin image-background-responsive($url: "image", $format: "jpg") {
	background-image: asset_url("#{$url}.webp");

	html.no-webp & {
		background-image: asset_url("#{$url}.#{$format}");
	}
}

@mixin textured-bg($target: "before", $include-position: true) {
    &:#{$target} {
        content: "";

        position: absolute;

        pointer-events: none;

        top: 0;
        bottom: 0;
        left: 0;
        right: 0;

        background-image: will_style-bg-url("patterns/grain.png");
        background-repeat: repeat;
        background-size: auto;

        opacity: 0.1;

        z-index: 0;
    }

    @if $include-position {
        & > * {
            position: relative;
        }
    }
}

@mixin grid-bg($target: "before", $include-position: true, $background-color: false, $include-fade: true) {
    @if $include-position {
        position: relative;
    }

    &:#{$target} {
        content: "";

        position: absolute;

        pointer-events: none;

        top: 0;
        bottom: 0;
        left: 0;
        right: 0;

        @if $background-color {
            background-color: $background-color;
        }

        background-image: will_style-bg-url("patterns/grid.svg");
        background-repeat: repeat;
        background-size: 100px 100px;

        opacity: 0.67;

        @if $include-fade {
            mask-image: linear-gradient(to bottom, rgba(0,0,0,0), rgba(0,0,0,1) 50px, rgba(0,0,0,1) calc(100% - 50px), rgba(0,0,0,0));
        }

        z-index: 0;
    }

    @if $include-position {
        & > * {
            position: relative;
        }
    }
}

@mixin grid-and-grain-bg($target: "before", $include-position: true, $background-color: false, $include-fade: true) {
    @if $include-position {
        position: relative;
    }

    &:#{$target} {
        content: "";

        position: absolute;

        pointer-events: none;

        top: 0;
        bottom: 0;
        left: 0;
        right: 0;

        @if $background-color {
            background-color: $background-color;
        }

        background-image:   will_style-bg-url("patterns/grid.svg"),
                            will_style-bg-url("patterns/grain-faded.png");

        background-repeat: repeat;

        background-size:    60px 60px,
                            auto;

        opacity: 0.5;

        z-index: 0;
    }

    @if $include-position {
        & > * {
            position: relative;
        }
    }
}

@mixin dark-gradient-bg {
    background-color: black;

    background-image:
        radial-gradient(circle farthest-corner at 0% 100%,
            rgba($will-teal, 0.8) 0%,
            rgba($will-action-iris, 0.3) 25%,
            rgba(#2B2E78, 0.2) 45%,
            rgba(black, 0) 100%),
        radial-gradient(circle farthest-corner at 100% 0%,
            rgba(#3A5CD8, 0.8) 0%,
            rgba(#A755AD, 0.3) 25%,
            rgba(#502953, 0.2) 45%,
            rgba(black, 0) 100%);

    background-repeat: no-repeat;
    background-size: cover;
}

@mixin light-gradient-bg {
    background-color: $will-white;

    background-image:
        radial-gradient(circle farthest-corner at 0 100%,
            rgba(72,188,151,.25) 0,
            rgba(74,80,207,.1) 25%,
            rgba(43,46,120,.05) 45%,
            rgba(248,250,252,0) 100%),
        radial-gradient(circle farthest-corner at 100% 0,
            rgba(58,92,216,.25) 0,
            rgba(167,85,173,.1) 25%,
            rgba(80,41,83,.05) 45%,
            rgba(248,250,252,0) 100%);

    background-repeat: no-repeat;
    background-size: cover;
}

@mixin light-ambient-glow($target-3: false) {
    $targets: "before", "after";

    container: ambient-glow / inline-size;

    &:before,
    &:after {
        content: "";

        position: absolute;

        pointer-events: none;

        z-index: 0;

        border-radius: 50%;
    }

    &:before {
        top: -25cqw;
        left: -25cqw;

        width: 70cqw;
        height: 70cqw;

        @media (orientation: landscape) {
            top: -50cqh;
            left: -50cqh;

            width: 100cqh;
            height: 100cqh;
        }

        background-color: transparent;
        background-image: radial-gradient(circle, rgba(6, 182, 212, .35) 0%, rgba(6, 182, 212, 0) 67%);

        animation: ambient-glow-pulse 8s ease-in-out infinite;
    }

    &:after {
        bottom: -7.5cqw;
        right: -25cqw;

        width: 67cqw;
        height: 67cqw;

        @media (orientation: landscape) {
            bottom: -7.5cqh;
            right: -25cqh;

            width: 67cqh;
            height: 67cqh;
        }

        background-image: radial-gradient(circle, rgba(16, 185, 129, 0.25) 0%, rgba(16, 185, 129, 0) 67%);

        animation: ambient-glow-pulse 10s ease-in-out infinite;
    }

    @if $target-3 {
        #{$target-3} {
            content: "";

            position: absolute;

            pointer-events: none;

            z-index: 0;

            border-radius: 50%;

            bottom: -10cqh;
            left: 30cqw;

            width: 40cqw;
            height: 40cqw;

            @media (orientation: landscape) {
                left: calc(50cqw - 25cqh);

                width: 50cqh;
                height: 50cqh;
            }

            background-image: radial-gradient(circle, rgba(139, 92, 246, .25) 0%, rgba(139, 92, 246, 0) 67%);

            animation: ambient-glow-pulse 12s ease-in-out infinite;
        }
    }
}

@keyframes ambient-glow-pulse {
    0%,
    to {
        opacity: 0.6;
        transform:scale(1)
    }

    50% {
        opacity: 1;
        transform:scale(1.05)
    }
}
