//
// Navbar Overrides
//

nav.navbar {

	// Obscuring scrolling content
	transition: background-color 0.2s ease-in-out,
				box-shadow 0.2s ease-in-out,;

	&.obscure {
		background-color: $dark;
		@extend .shadow-bottom;
	}

	// Styling Navbar links

	.nav-link {
		-webkit-user-select: none;

		transition: color 0.2s ease-in-out;
	}

	// Navbar Toggler animation

	.navbar-toggler {
		position: relative;

		&:before,
		&:after,
		.navbar-toggler-icon:before,
		.navbar-toggler-icon:after {
			content: "";

			position: absolute;

			left: $navbar-toggler-padding-x * 1.25;
			right: $navbar-toggler-padding-x * 1.25;

			height: 2px;

			background-color: $body-bg;
		}

		&:before,
		&:after {
			@include hardware-accelerate;

			will-change: transform;

			top: calc(50% - 1px);
		}

		&:after {
			@include hardware-accelerate;

			will-change: opacity,
						 transform;

			opacity: 0;
			transform: rotate(-225deg);
		}

		.navbar-toggler-icon:before {
			top: $navbar-toggler-padding-y * 2.5;

			transform-origin: left center;
		}

		.navbar-toggler-icon:after {
			bottom: $navbar-toggler-padding-y * 2.5;

			transform-origin: right center;
		}

		&[aria-expanded="true"] {
			&:before {
				transform: rotate(-225deg);

				transition: transform 0.2s ease-in-out;
			}

			&:after {
				transform: rotate(-315deg);
				opacity: 1;

				transition: transform 0.2s 0.15s ease-in-out,
							opacity 0s 0.2s linear;
			}

			.navbar-toggler-icon:before,
			.navbar-toggler-icon:after {
				transform: scaleX(0);

				transition: transform 0.05s ease-in-out;
			}
		}
	}

	// Navbar on small screens

	@include media-breakpoint-down(md) {
		.navbar-toggler {
			z-index: 11;
		}

		.navbar-collapse {
			padding: 1rem 2rem;

			position: absolute;
			z-index: 10;

			top: 0;
			left: 0;

			width: 100vw;
			min-height: 100vh !important;

			display: block;

			transform: translateX(-100%);

			&:before {
				content: "";

				position: fixed;

				top: 0;
				bottom: 0;
				left: 0;
				right: 0;

				background-color: $dark;

				opacity: 0;

				transition: opacity 0.2s ease-in-out;

				z-index: -1;
			}

			.nav-item {
				@include hardware-accelerate;

				will-change: opacity,
							 transform;

				transform: translate3d(-5px, -5px, 0);
				opacity: 0;

				.nav-link {
					// Only increase font-size on portrait â€“ there isn't enough room on phones in landscape
					@media (orientation: portrait) {
						@include scale-font-size(2rem);
					}
				}
			}

			&.collapsing,
			&.show {
				transform: translateX(0);

				&:before {
					opacity: 1;
				}
			}

			&.collapsing {
				.nav-item {
					opacity: 0;
					transition: none;
				}
			}

			&.collapsing-out:before {
				opacity: 0;
			}

			&.show {
				.nav-item {
					transform: translate3d(0, 0, 0);
					opacity: 1;

					transition: transform 0.2s ease-in-out,
								opacity 0.2s ease-in-out;
				}
			}
		}
	}

	// Add absolutely positioned and fixed position navbars with the navbar-abs class

	&.navbar-abs {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;

		z-index: $navbar-z-index;
	}

	&.navbar-fixed {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;

		z-index: $navbar-z-index;
	}

	// Ensure Navbar Logo is big enough for logo to be by itself

	a.navbar-brand {
		-webkit-user-select: none;

		// Ensure WILL Logo isn't huge on firefox
		svg {
			max-width: #{($nav-link-padding-y * 2 + $font-size-base * $line-height-base) * $will-logo-aspect-ratio};
		}

		min-width: #{($nav-link-padding-y * 2 + $font-size-base * $line-height-base) * $will-logo-aspect-ratio};
	}
}
