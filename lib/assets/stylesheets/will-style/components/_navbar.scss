//
// Navbar Overrides
//

nav.navbar {

	// Styling Navbar links

	.nav-link {
		transition: color 0.2s ease-in-out;

		position: relative;

		@include media-breakpoint-up(lg) {
			&:after {
				content: "";
				position: absolute;
				bottom: 0;
				left: 0;
				right: 0;

				@include scale-property(height, 1px, $global-scale-factor);

				background-color: $navbar-dark-hover-color;

				transform: scaleX(0);
				transform-origin: left center;
				transition: transform 0.4s ease-in-out;
			}

			@include hover-focus {
				&:after {
					transform: scaleX(1);
				}
			}
		}
	}

	// Navbar Toggler animation

	.navbar-toggler {
		position: relative;

		&:before,
		&:after,
		.navbar-toggler-icon:before,
		.navbar-toggler-icon:after {
			content: "";

			position: absolute;

			left: $navbar-toggler-padding-x * 1.25;
			right: $navbar-toggler-padding-x * 1.25;

			height: 2px;

			background-color: $body-bg;
		}

		&:before,
		&:after {
			top: calc(50% - 1px);
		}

		&:after {
			opacity: 0;
			transform: rotate(-225deg);
		}

		.navbar-toggler-icon:before {
			top: $navbar-toggler-padding-y * 2.5;

			transform-origin: left center;
		}

		.navbar-toggler-icon:after {
			bottom: $navbar-toggler-padding-y * 2.5;

			transform-origin: right center;
		}

		&[aria-expanded="true"] {
			&:before {
				transform: rotate(-225deg);

				transition: transform 0.2s ease-in-out;
			}

			&:after {
				transform: rotate(-315deg);
				opacity: 1;

				transition: transform 0.2s 0.15s ease-in-out,
							opacity 0s 0.2s linear;
			}

			.navbar-toggler-icon:before,
			.navbar-toggler-icon:after {
				transform: scaleX(0);

				transition: transform 0.05s ease-in-out;
			}
		}
	}

	// Navbar on small screens

	@include media-breakpoint-down(md) {
		.navbar-toggler {
			z-index: 11;
		}

		.navbar-collapse {
			padding: 2rem;
			padding-top: $navbar-height;

			position: absolute;
			z-index: 10;

			top: 0;
			left: 0;

			width: calc(100vh - 4rem);
			min-height: 100vh;

			display: block;

			transform: translateX(-100%);
			transition: transform 0s 0.4s linear;

			&:before {
				content: "";

				position: fixed;

				top: 0;
				bottom: 0;
				left: 0;
				right: 0;

				background-color: $dark;

				opacity: 0;

				transition: opacity 0.2s ease-in-out;

				z-index: -1;
			}

			.nav-item {
				transform: translate(-5px, -5px);
				opacity: 0;

				transition: transform 0.2s ease-in-out,
							opacity 0.2s ease-in-out;

				.nav-link {
					@include scale-font-size(2rem);
				}
			}

			&.collapsing,
			&.show {
				transform: translateX(0);
				transition: transform 0s;

				&:before {
					opacity: 0.99;
				}
			}

			&.show {
				.nav-item {
					transform: translate(0, 0);
					opacity: 1;
				}
			}
		}
	}

	// Add absolutely positioned and fixed position navbars with the navbar-abs class

	&.navbar-abs {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;

		z-index: $navbar-z-index;
	}

	&.navbar-fixed {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;

		z-index: $navbar-z-index;
	}

	// Ensure Navbar Logo is big enough for logo to be by itself

	a.navbar-brand {
		min-width: #{($nav-link-padding-y * 2 + $font-size-base * $line-height-base) * $will-logo-aspect-ratio};
	}
}
