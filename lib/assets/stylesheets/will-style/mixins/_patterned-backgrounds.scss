$patterned-background-overlay-opacity: 0.9;
$patterned-background-opacity: 0.02;

//
// Patterned Background Overlays
//

@mixin patterned-background($include-overlay: true, $fg: false) {
	&:before,
	&:after {
		content: "";

		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;

		z-index: 0;
	}

	@if $include-overlay == true {
		&:before {
			background-color: $dark;
			opacity: $patterned-background-overlay-opacity;
		}
	}

	&:after {
		background-image: asset_url("will-style/patterns/bg-pattern.jpg");
		background-repeat: repeat;
		background-attachment: fixed;

		opacity: $patterned-background-opacity;
	}


	@if $fg == true {
		&:before,
		&:after {
			z-index: 1;
		}
	} else {
		// @FIXME: We shouldn't muck around with z-index here.
		// Is there another way to get the after element underneath the content?
		& > * {
			position: relative;
			z-index: 1;
		}
	}
}

@mixin patterned-background-light() {
	// @FIXME: We shouldn't muck around with z-index here.
	// Is there another way to get the after element underneath the content?
	& > * {
		position: relative;
		z-index: 1;
	}

	background-color: $will-bg-light;

	&:before {
		content: "";

		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;

		z-index: 0;

		background-image: asset_url("will-style/patterns/bg-pattern.jpg");
		background-repeat: repeat;
		background-attachment: fixed;

		opacity: $patterned-background-opacity * 4;
	}
}
