// Blocked Text and buttons

@mixin blocked-text($border-color: $body-font-color) {
	// use condensed font-family for h1
	text-transform: uppercase;

	// add a span around text if you want a border
	span, input {
		background: none;

		// This allows us to set even padding for spacing
		line-height: 1;

		padding: 2rem 6rem;

		border: 3px solid $border-color;

		// make sure the border doesn't break when the line does
		display: inline-block;

		// reduce padding on collapsed

		// reduce padding on small screens to prevent word wrap
		@media #{$small-only} {
			padding: 1rem 2rem;
		}
	}

	&.collapsed span {
		padding: 2rem;
	}

	input {
		width: 100%;
	}
}

@mixin blocked-button($color: $primary-color) {
	span,
	input {
		cursor: pointer;
		overflow: hidden;

		background-image: linear-gradient(315deg, $color 0%, $color 50%, transparent 50%);
		background-size: 202% 200%;
		background-position: 0% 0%;

		will-change: background-position;
		will-change: color;

		color: $color;

		transition: color .2s 0s ease-in,
					background-position .2s 0s ease-in;

		//
		// Hover States
		//

		html.no-touch &:hover,
		html.no-touch &:focus {
			transition: color .2s .2s ease-out,
						background-position .2s 0s ease-in;

			color: #fff;

			background-position: 90% 90%;
		}

		//
		// Selected States
		//

		html.no-touch &:active,
		html.no-touch &.selected,
		html.touch &:focus {
			transition: color .2s 0s ease-in,
						background-position .05s 0s ease-in;

			color: #fff;

			.blocked-button.dark &,
			.blocked-button.light & {
				color: $theme-grey;
			}

			background-position: 99% 100%;

			border-right: 2px solid $color;
		}

		&:disabled {
			background: none !important;
			color: $color !important;
			cursor: not-allowed;
			opacity: .6;
		}

		//
		// IE9 Fallback States
		//

		html.no-cssanimations & {
			background-image: none !important;
			background-size: 100% 100% !important;

			&:hover,
			&:focus,
			&.selected {
				background-color: $color;
			}
		}
	}

	&.dark {
		span,
		input {
			&:hover,
			&:focus,
			&:active,
			&.selected {
				color: $theme-grey !important;
			}
		}
	}

	&.dark,
	&.light {
		span,
		input {
			&:hover,
			&:focus,
			&:active,
			&.selected {
				color: $primary-color !important;
			}
		}
	}
}

@mixin outlined-button($animation-time: 0.5s, $include-border: false) {
	position: relative;
	overflow: visible;

	@if $include-border == true {
		border: 2px solid $body-font-color;
	} @else {
		border: 2px solid transparent !important;
	}

	background: transparent;

	p {
		line-height: 1;
		margin-bottom: 0;

		color: $body-font-color;
	}

	p:before,
	p:after {
		content: "";

		margin-top: 0;

		position: absolute;

		top: -2px;
		bottom: -2px;
		left: -2px;
		right: -2px;

		z-index: 0;

		height: auto;

		transition-timing-function: linear;

		background-repeat: no-repeat;

		background-size: 100% 2px,
						 2px 100%;

		transform: scaleX(0);
	}

	&.disabled {
		p:before,
		p:after {
			display: none;
		}
	}

	p:before {
		background-image: 	linear-gradient(to right, $primary-color-lighter, $primary-color),
							linear-gradient(to right, $primary-color, $primary-color);

		background-position: center top,
							 right top;

		transform-origin: left top;

		bottom: 100%;

		transition: transform $animation-time / 2 $animation-time / 4,
							  bottom $animation-time / 4;
	}

	p:after {
		background-image: 	linear-gradient(to bottom, $primary-color, $primary-color),
							linear-gradient(to bottom, $primary-color-lighter, $primary-color);

		background-position: center bottom,
							 left bottom;

		transform-origin: right bottom;

		top: 100%;

		transition: transform $animation-time / 2 $animation-time / 4,
							  top $animation-time / 4;
	}

	&:not([disabled]) {
		&:hover,
		&:focus {
			background-color: transparent;

			p:before {
				transform: scaleX(1);

				transition: transform $animation-time,
							bottom $animation-time / 2 $animation-time;
			}

			p:after {
				transform: scaleX(1);

				transition: transform $animation-time,
							top $animation-time / 2 $animation-time;
			}

			p:before {
				bottom: -2px;
			}

			p:after {
				top: -2px;
			}
		}
	}
}

//
// Animated Links

@mixin animated-link($fg-color: $primary-color, $bg-color: $body-bg) {
	transition: color .2s,
				box-shadow .2s;

	text-shadow:	-0.025em 0 $bg-color,
					0.025em 0 $bg-color,

					0 -0.025em $bg-color,
					0 0.025em $bg-color,

					-0.05em 0.01em $bg-color,
					0.05em 0.01em $bg-color,

					-0.075em 0.01em $bg-color,
					0.075em 0.01em $bg-color,

					-0.10em 0.01em $bg-color,
					0.10em 0.01em $bg-color,

					-0.125em 0.01em $bg-color,
					0.125em 0.01em $bg-color,

					-0.15em 0.01em $bg-color,
					0.15em 0.01em $bg-color;

	box-shadow: 0px -2px 0px 0px $fg-color inset;

	&:hover,
	&:focus {
		color: $fg-color;
	}

	&::selection {
		// @NOTE: We're setting the background color here to 0.99 opacity to trick the browser into not using the default, non-overrideable opacity on backgrounds
		background: rgba($primary-color, 0.99);

  		text-shadow: none !important;
	}
}

@mixin underlined($position: 'bottom', $height: 2px) {
	position: relative;

	@if $position == 'bottom' {
		padding-bottom: $height * 2;
		padding-top: inherit;
	} @else {
		padding-top: $height * 2;
		padding-bottom: inherit;
	}

	&:before {
		content: "";

		position: absolute;

		@if $position == 'bottom' {
			bottom: 0;
			top: auto;
		} @else {
			top: 0 ;
			bottom: auto;
		}

		left: 0;
		right: 0;

		height: $height;

		background-color: $primary-color;
		background-image: linear-gradient(to right, $primary-color-lighter, $primary-color);
	}
}
