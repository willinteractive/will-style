// CUSTOM WILL HEADER
// Full-Screen Pop-Out Navigation
// http://codyhouse.co/gem/full-screen-pop-out-navigation/
// -------------------

// FOUNDATION
// ------------------

$topbar-height: rem-calc(24);

$topbar-bg: transparent;
$topbar-dropdown-bg: $topbar-bg;

$topbar-link-color: $white;
$topbar-link-color-hover: darken($white, 10%);
$topbar-link-color-active: $primary-color;
$topbar-link-color-active-hover: darken($primary-color, 10%);
$topbar-link-weight: $font-weight-normal;
$topbar-link-font-size: rem-calc(13);
$topbar-link-bg: $topbar-bg;
$topbar-link-bg-hover: $topbar-bg;
$topbar-link-bg-color-hover: $topbar-bg;
$topbar-link-bg-active: $topbar-bg;
$topbar-link-bg-active-hover: $topbar-bg;
$topbar-link-text-transform: uppercase;


// import Foundation's TopBar
@import "foundation/components/top-bar";

// CUSTOM VARIABLES & MIXINS

$topbar-bg-active: $topbar-bg-color;

@mixin center($xy: xy) {
	@if $xy == xy {
		left: 50%;
		top: 50%;
		bottom: auto;
		right: auto;
		transform: translateX(-50%) translateY(-50%);
	}
	@else if $xy == x {
		left: 50%;
		right: auto;
		transform: translateX(-50%);
	}
	@else if $xy == y {
		top: 50%;
		bottom: auto;
		transform: translateY(-50%);
	}
}

@mixin topbar-height-change($multiplier: 2) {
	.cd-header {
		height: $topbar-height * $multiplier;

		&.is-fixed {
			top: $topbar-height * ($multiplier * -1);
		}
	}

	.cd-primary-nav {
		& + main section:first-of-type, & + section:first-of-type {
			padding-top: $topbar-height * ($multiplier * 1.5);
		}
	}

	.top-bar,
	.top-bar-section li.active:not(.has-form) a:not(.button),
	.top-bar-section li:not(.has-form) a:not(.button) {
		height: $topbar-height * $multiplier;
		line-height: $topbar-height * $multiplier;
		//transition: all .3s;
	}

	.top-bar-section {
		ul li > a {
			font-size: $topbar-link-font-size * ($multiplier * .6);
			line-height: $topbar-height * $multiplier;

			font-weight: normal;
			font-family: $header-font-family;
		}
	}
}

// LOGO

// aligning image text inside .title-area

#will-header img,
#will-header svg {
	vertical-align: middle;
}

.top-bar {
	.title-area {
		height: 100%;

		li.name {
			height: 100%;

			a {
				height: 100%;

				#will-logo-svg {
					padding: 0.5rem;

					height: 100%;
					width: auto;

					@media #{$small-only} {
						padding: 0.25rem;
						padding-left: 0.5rem;
					}
				}
			}
		}
	}
}

// HEADER

.cd-header {
	// initial position of header
	position: absolute;
	top: 0;
	left: 0;
	z-index: 999;

	background: $topbar-bg-color;
	height: $topbar-height;
	width: 100%;

	transition: background-color .3s;
	/* Force Hardware Acceleration in WebKit */
	transform: translate3d(0,0,0);
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;

	&.is-fixed {
		// when the user scrolls down, we hide the header right above the viewport
		position: fixed;
		top: $topbar-height*-1;

		background-color: $topbar-bg-active;

		-webkit-transition: -webkit-transform 0.3s;
		-moz-transition: -moz-transform 0.3s;
		transition: transform 0.3s;
	}

	&.is-visible {
		// if the user changes the scrolling direction, we show the header
		transform: translate3d(0,100%,0);
	}

	&.menu-is-open {
		/* add a background color to the header when the navigation is open */
		background-color: $topbar-bg-active;
	}

	background: $topbar-bg;
}

// add padding to first section after nav

.cd-primary-nav {
	& + main section:first-of-type, & + section:first-of-type {
		padding-top: $topbar-height*1.5;
	}
}

@media #{$topbar-media-query} {
	@include topbar-height-change(1.5);
}

@media #{$large-up} {
	@include topbar-height-change(2);
}

// NAV OVERLAY

.cd-primary-nav {
	// by default it's hidden - on top of the viewport
	position: fixed;
	left: 0;
	top: 0;
	height: 100%;
	width: 100%;
	background: $topbar-bg-active;
	z-index: 998;
	text-align: center;
	padding: $topbar-height 0;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;

	overflow: auto;
	// this fixes the buggy scrolling on webkit browsers - mobile devices only - when overflow property is applied
	-webkit-overflow-scrolling: touch;

	transform: translateY(-100%);
	transition-property: transform;
	transition-duration: .4s;

	ul {
		// remove default margins
		margin: 0;
	}

	li {
		font-size: rem_calc(36);
		margin: .2em 0;
		text-transform: capitalize;

		&.active a {
			color: $topbar-link-color-active;
		}
	}

	a {
		display: inline-block;
		padding: .4em 1em;
		transition: background .2s;
		text-transform: uppercase;
		font-family: $header-font-family;

		&:hover {
			color: $topbar-link-color-hover;
		}
	}

	&.is-visible {
		transform: translateY(0);
	}
}

// if the browser supports flex, make the links expand the whole height

.flexbox {
	.cd-primary-nav ul {
		height: 100%;
		display: flex;
		flex-direction: column;
		justify-content: space-around;
	}
}

// MENU TRIGGER ICON

.cd-primary-nav-trigger {
	position: absolute;
	right: 0;
	top: 0;
	height: 100%;
	width: 50px;

	.cd-menu-text {
		// hide the text
		display: none;
	}

	.cd-menu-icon {
		// this span is the central line of the menu icon
		display: inline-block;
		position: absolute;
		@include center;
		width: 18px;
		height: 2px;
		background-color: $topbar-link-color;
		transition: background-color .3s;

		// these are the upper and lower lines in the menu icon
		&::before, &:after {
			content: '';
			width: 100%;
			height: 100%;
			position: absolute;
			background-color: $topbar-link-color;
			right: 0;

			-webkit-transition: -webkit-transform .3s, top .3s, background-color 0s;
			-moz-transition: -moz-transform .3s, top .3s, background-color 0s;
			transition: transform .3s, top .3s, background-color 0s;
		}

		&::before {
			top: -5px;
		}

		&::after {
			top: 5px;
		}

		&.is-clicked {
			background-color: rgba($topbar-link-color-active, 0);

			&::before, &::after {
				background-color: rgba($topbar-link-color-active, 1);
			}

			&::before {
				top: 0;
				transform: rotate(135deg);
			}

			&::after {
				top: 0;
				transform: rotate(225deg);
			}
		}
	}
}

// Link Styles

nav .top-bar-section ul li > a {
	transition: color .2s;

	// color: white !important;
	// font-weight: normal !important;

	&:hover,
	&:active {
		color: $primary-color;
	}
}
